# CLAUDE.md - AI ì½”ë”© ê°€ì´ë“œ

> AI ì½”ë”© ì–´ì‹œìŠ¤í„´íŠ¸ê°€ í”„ë¡œì íŠ¸ ì»¨í…ìŠ¤íŠ¸ë¥¼ ì´í•´í•˜ê³  ì¼ê´€ëœ ì½”ë“œë¥¼ ìƒì„±í•˜ê¸° ìœ„í•œ ê°€ì´ë“œ

## ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#-í”„ë¡œì íŠ¸-ê°œìš”)
2. [í•µì‹¬ ë„ë©”ì¸ ì§€ì‹](#-í•µì‹¬-ë„ë©”ì¸-ì§€ì‹)
3. [ê¸°ìˆ  ìŠ¤íƒ](#-ê¸°ìˆ -ìŠ¤íƒ)
4. [ì½”ë“œ ì»¨ë²¤ì…˜](#-ì½”ë“œ-ì»¨ë²¤ì…˜)
5. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#-í”„ë¡œì íŠ¸-êµ¬ì¡°)
6. [ë°ì´í„° íƒ€ì…](#-ë°ì´í„°-íƒ€ì…)
7. [UI ì»´í¬ë„ŒíŠ¸ ê°€ì´ë“œ](#-ui-ì»´í¬ë„ŒíŠ¸-ê°€ì´ë“œ)
8. [ëŒ€ì‹œë³´ë“œ êµ¬í˜„ ê°€ì´ë“œ](#-ëŒ€ì‹œë³´ë“œ-êµ¬í˜„-ê°€ì´ë“œ)
9. [ê°œì¸ì •ë³´ ë³´í˜¸](#-ê°œì¸ì •ë³´-ë³´í˜¸)
10. [AI ì–´ì‹œìŠ¤í„´íŠ¸ êµ¬í˜„ ê°€ì´ë“œ](#-ai-ì–´ì‹œìŠ¤í„´íŠ¸-êµ¬í˜„-ê°€ì´ë“œ)
11. [ìƒë‹´ì¼ì • ê¸°ëŠ¥ êµ¬í˜„ ê°€ì´ë“œ](#-ìƒë‹´ì¼ì •-ê¸°ëŠ¥-êµ¬í˜„-ê°€ì´ë“œ)
12. [ì²´í¬ë¦¬ìŠ¤íŠ¸](#-ì²´í¬ë¦¬ìŠ¤íŠ¸)

---

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

**META í•™ìŠµì‹¬ë¦¬ì •ì„œê²€ì‚¬ AI ì—ì´ì „íŠ¸ ëŒ€ì‹œë³´ë“œ**

êµì‚¬ê°€ í•™ìƒë“¤ì˜ í•™ìŠµì‹¬ë¦¬ì •ì„œê²€ì‚¬ ê²°ê³¼ë¥¼ ë¶„ì„í•˜ê³ , ë§ì¶¤í˜• ì½”ì¹­ ì „ëµì„ ìˆ˜ë¦½í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” ì›¹ ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤.

---

## ğŸ¯ í•µì‹¬ ë„ë©”ì¸ ì§€ì‹

### ê²€ì‚¬ êµ¬ì¡°

| êµ¬ë¶„ | ì„¤ëª… |
|------|------|
| **38ê°œ ìš”ì¸** | í•™ìƒì˜ í•™ìŠµì‹¬ë¦¬ì •ì„œë¥¼ ì¸¡ì •í•˜ëŠ” ì„¸ë¶€ í•­ëª© |
| **11ê°œ ì¤‘ë¶„ë¥˜** | ìš”ì¸ë“¤ì„ ë¬¶ì€ ìƒìœ„ ì¹´í…Œê³ ë¦¬ |
| **5ëŒ€ ì˜ì—­** | ìì•„ê°•ì , í•™ìŠµë””ë”¤ëŒ, í•™ìŠµê±¸ë¦¼ëŒ, ê¸ì •ì ê³µë¶€ë§ˆìŒ, ë¶€ì •ì ê³µë¶€ë§ˆìŒ |
| **Tì ìˆ˜** | í‰ê·  50, í‘œì¤€í¸ì°¨ 10 ê¸°ì¤€ í‘œì¤€í™” ì ìˆ˜ (20~80 ë²”ìœ„) |

### LPA ìœ í˜• ë¶„ë¥˜

í•™ìƒì„ 38ê°œ Tì ìˆ˜ íŒ¨í„´ì— ë”°ë¼ 3ê°œ ìœ í˜•ìœ¼ë¡œ ë¶„ë¥˜:

| í•™êµê¸‰ | ìœ í˜• | ë¹„ìœ¨ | íŠ¹ì§• |
|--------|------|------|------|
| **ì´ˆë“±** | ğŸŸ  ìì›ì†Œì§„í˜• | 30.55% | ì‹¬ë¦¬ìì› ë‚®ìŒ, ìŠ¤íŠ¸ë ˆìŠ¤ ë†’ìŒ |
| | ğŸ”µ ì•ˆì „ê· í˜•í˜• | 35.47% | ì „ë°˜ì  ê· í˜•, ì ê²€ëŠ¥ë ¥ ì•½í•¨ |
| | ğŸ”· ëª°ì…ìì›í’ë¶€í˜• | 33.98% | ë™ê¸° ë†’ìŒ, ì‹œí—˜ì „ëµ ë³´ì™„ í•„ìš” |
| **ì¤‘ë“±** | ğŸŸ  ë¬´ê¸°ë ¥í˜• | 35.4% | ë™ê¸° ì €í•˜, ë¬´ë ¥ê°, ëª©í‘œ ì„¤ì • ì–´ë ¤ì›€ |
| | ğŸ”µ ì •ì„œì¡°ì ˆì·¨ì•½í˜• | 38.0% | ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ ë¯¸í¡, ê°ì • ê¸°ë³µ, ë¶ˆì•ˆ ê²½í–¥ |
| | ğŸ”· ìê¸°ì£¼ë„ëª°ì…í˜• | 26.6% | ììœ¨ì  í•™ìŠµ, ë†’ì€ ì„±ì·¨ë™ê¸°, íš¨ê³¼ì  ì‹œê°„ê´€ë¦¬ |

### ëŒ€ì‹œë³´ë“œ êµ¬ì¡°

```
L1: êµì‚¬ ì „ì²´ ë°˜ ëŒ€ì‹œë³´ë“œ        â†’ /dashboard
 â””â”€ L2: íŠ¹ì • ë°˜ ëŒ€ì‹œë³´ë“œ         â†’ /dashboard/class/:classId
     â”œâ”€ L2.5: í•™ê¸‰ íŠ¹ì„± ìƒì„¸ ë¶„ì„ â†’ /dashboard/class/:classId/analysis
     â””â”€ L3: íŠ¹ì • í•™ìƒ ëŒ€ì‹œë³´ë“œ    â†’ /dashboard/class/:classId/student/:studentId
```

---

## ğŸ”§ ê¸°ìˆ  ìŠ¤íƒ

| ë¶„ë¥˜ | ê¸°ìˆ  |
|------|------|
| í”„ë ˆì„ì›Œí¬ | React 19 + TypeScript + Vite |
| ìŠ¤íƒ€ì¼ë§ | TailwindCSS |
| ì°¨íŠ¸ | Recharts (Line, Bar, Pie), @nivo/bar (Stacked Bar) |
| ë¼ìš°íŒ… | React Router v6 |
| ì•„ì´ì½˜ | Lucide React |
| **AI ëª¨ë¸** | **Google Gemini 2.0 Flash** |

### AI ì„œë¹„ìŠ¤ ì•„í‚¤í…ì²˜

```
ì»´í¬ë„ŒíŠ¸ â†’ callAI() â†’ ai.ts â†’ gemini.ts â†’ Gemini API
                        â†“
              aiPrompts.ts (ê¸°ëŠ¥ë³„ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸)
                        â†“
              piiMasking.ts (ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹)
```

### AI ì„œë¹„ìŠ¤ ê·œì¹™

- **ê¸°ë³¸ ëª¨ë¸**: `gemini-2.5-flash` (v1beta ì—”ë“œí¬ì¸íŠ¸)
- **API Key**: `.env` íŒŒì¼ì˜ `VITE_GEMINI_API_KEY`ì— ì„¤ì •
- **429 ì—ëŸ¬ ì²˜ë¦¬**: ìë™ ì¬ì‹œë„ (ìµœëŒ€ 3íšŒ, ì§€ìˆ˜ ë°±ì˜¤í”„)
- **PII ë§ˆìŠ¤í‚¹**: ëª¨ë“  AI í˜¸ì¶œ ì‹œ ìë™ìœ¼ë¡œ ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹ ì ìš©
- **ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ë³€í™˜**: GeminiëŠ” system role ë¯¸ì§€ì› â†’ user/model ìŒìœ¼ë¡œ ë³€í™˜

### AI ê´€ë ¨ íŒŒì¼

| íŒŒì¼ | ì—­í•  |
|------|------|
| `shared/services/ai.ts` | AI ì„œë¹„ìŠ¤ ì¶”ìƒí™” ë ˆì´ì–´ (Provider ì„ íƒ, ê¸°ëŠ¥ë³„ í”„ë¡¬í”„íŠ¸ ì ìš©) |
| `shared/services/gemini.ts` | Gemini API í˜¸ì¶œ (ì¬ì‹œë„, PII ë§ˆìŠ¤í‚¹, ë©”ì‹œì§€ ë³€í™˜) |
| `shared/data/aiPrompts.ts` | ê¸°ëŠ¥ë³„ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ ê´€ë¦¬ (analysis, record, dataHelper, assistant, classAnalysis) |
| `shared/utils/piiMasking.ts` | ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹ ìœ í‹¸ë¦¬í‹° |
| `shared/utils/summaryGenerator.ts` | AI ì´í‰ ìƒì„± (11ê°œ ì¤‘ë¶„ë¥˜ â†’ 3ì¤„ ìš”ì•½) |
| `shared/utils/recordGenerator.ts` | ìƒí™œê¸°ë¡ë¶€ ë¬¸êµ¬ ìƒì„± ìœ í‹¸ë¦¬í‹° (ê°•ì  ì˜ì—­ ì¶”ì¶œ, ë³€í™” ë¶„ì„) |
| `shared/data/schoolRecordSentences.ts` | ìƒí™œê¸°ë¡ë¶€ ì˜ˆì‹œ ë¬¸ì¥ ë°ì´í„° (11ê°œ ì¤‘ë¶„ë¥˜ Ã— 3 í•™êµê¸‰ Ã— 3ë¬¸ì¥ = 99ê°œ) |
| `features/ai-room/services/assistantService.ts` | AI Room ëŒ€í™” ì„œë¹„ìŠ¤ (RAG ì»¨í…ìŠ¤íŠ¸ ê¸°ë°˜) |
| `features/ai-room/services/contextBuilder.ts` | ì»¨í…ìŠ¤íŠ¸ ë¹Œë” (ëª¨ë“œë³„ RAG, í•™ìƒ ë³„ì¹­ ì‹œìŠ¤í…œ) |
| `features/student-dashboard/services/dataHelperService.ts` | ë°ì´í„° í•´ì„ ë„ìš°ë¯¸ AI ì„œë¹„ìŠ¤ (7ê°œ ì§ˆë¬¸ë³„ í”„ë¡¬í”„íŠ¸) |

### ê¸°ëŠ¥ë³„ í”„ë¡¬í”„íŠ¸ (AIFeature)

| feature | ì‚¬ìš©ì²˜ | ìƒíƒœ |
|---------|--------|------|
| `analysis` | L3 í•™ìƒ ëŒ€ì‹œë³´ë“œ > AI ë¶„ì„ ì´í‰ | âœ… êµ¬í˜„ ì™„ë£Œ |
| `record` | L3 í•™ìƒ ëŒ€ì‹œë³´ë“œ > ìƒí™œê¸°ë¡ë¶€ ë¬¸êµ¬ ìƒì„± | âœ… êµ¬í˜„ ì™„ë£Œ |
| `dataHelper` | L3 í•™ìƒ ëŒ€ì‹œë³´ë“œ > ë°ì´í„° í•´ì„ ë„ìš°ë¯¸ (7ê°œ ì§ˆë¬¸) | âœ… êµ¬í˜„ ì™„ë£Œ |
| `assistant` | AI Room > êµì‚¬-AI ëŒ€í™” | âœ… êµ¬í˜„ ì™„ë£Œ |
| `classAnalysis` | L2.5 í•™ê¸‰ ìƒì„¸ ë¶„ì„ > AI í•™ê¸‰ ë¶„ì„ ì´í‰ (overall + keyPoint) | âœ… êµ¬í˜„ ì™„ë£Œ |

---

## âœï¸ ì½”ë“œ ì»¨ë²¤ì…˜

### TypeScript

```typescript
// âœ… interface ì„ í˜¸ (typeë³´ë‹¤)
interface StudentCardProps {
  student: Student;
  onClick?: (id: string) => void;
}

// âœ… í•¨ìˆ˜í˜• ì»´í¬ë„ŒíŠ¸
const StudentCard: React.FC<StudentCardProps> = ({ student, onClick }) => {
  // hooks â†’ effects â†’ handlers â†’ render helpers â†’ return
};
```

### TailwindCSS ìƒ‰ìƒ ê·œì¹™

```typescript
// ìœ í˜•ë³„ ìƒ‰ìƒ
const TYPE_COLORS = {
  'ìì›ì†Œì§„í˜•': 'bg-orange-50 text-orange-600 border-orange-200',
  'ì•ˆì „ê· í˜•í˜•': 'bg-teal-50 text-teal-600 border-teal-200',
  'ëª°ì…ìì›í’ë¶€í˜•': 'bg-blue-50 text-blue-600 border-blue-200',
  // ì¤‘ë“±ë„ ë™ì¼í•œ ìƒ‰ìƒ ì²´ê³„ ì ìš©
} as const;

// ë³€í™” ìƒíƒœ ìƒ‰ìƒ (L2)
const CHANGE_COLORS = {
  positive: 'bg-emerald-500',       // ê¸ì • ë³€í™” ë°°ì§€
  positiveLight: 'bg-emerald-50',   // ê¸ì • ë³€í™” ë°°ê²½
  negative: 'bg-red-500',           // ë¶€ì • ë³€í™” ë°°ì§€
  negativeLight: 'bg-red-50',       // ë¶€ì • ë³€í™” ë°°ê²½
  reliabilityWarning: 'bg-red-500', // ì‹ ë¢°ë„ ì£¼ì˜ ë°°ì§€
  needAttention: 'bg-amber-500',    // ê´€ì‹¬ í•„ìš” ë°°ì§€
} as const;

// Primary ìƒ‰ìƒ: bg-primary-500 (#3351A4), bg-primary-600 (#2A4490)
```

---

## ğŸ“ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
src/
â”œâ”€â”€ features/                    # ê¸°ëŠ¥ë³„ ëª¨ë“ˆ (kebab-case)
â”‚   â””â”€â”€ [feature-name]/
â”‚       â”œâ”€â”€ pages/               # PascalCase + Page suffix
â”‚       â”œâ”€â”€ components/          # PascalCase
â”‚       â””â”€â”€ index.ts
â”œâ”€â”€ shared/
â”‚   â”œâ”€â”€ components/              # ê³µìœ  ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ utils/                   # ìœ í‹¸ë¦¬í‹° í•¨ìˆ˜ (camelCase)
â”‚   â”œâ”€â”€ data/                    # ë°ì´í„° íŒŒì¼
â”‚   â”œâ”€â”€ services/                # API ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ types/                   # íƒ€ì… ì •ì˜
â””â”€â”€ app/
    â”œâ”€â”€ App.tsx
    â”œâ”€â”€ Layout.tsx
    â””â”€â”€ routes.tsx
```

### ì£¼ìš” íŒŒì¼

| íŒŒì¼ | ì—­í•  |
|------|------|
| `shared/utils/lpaClassifier.ts` | LPA ìœ í˜• ë¶„ë¥˜ ì•Œê³ ë¦¬ì¦˜ |
| `shared/utils/attentionChecker.ts` | ê´€ì‹¬ í•„ìš” í•™ìƒ íŒë³„ (ì •ì  Tâ‰¤39, ë¶€ì  Tâ‰¥60) |
| `shared/data/lpaProfiles.ts` | 38ê°œ ìš”ì¸, ìœ í˜•ë³„ ì¤‘ì‹¬ê°’, ì‚¬ì „í™•ë¥  |
| `shared/data/factors.ts` | ìš”ì¸ ë©”íƒ€ë°ì´í„° (ëŒ€ë¶„ë¥˜, ì¤‘ë¶„ë¥˜, ê¸ì •/ë¶€ì •) |
| `shared/data/dataTransformer.ts` | JSON ì›ë³¸ â†’ Assessment ë³€í™˜ (ìš”ì¸ ë§¤í•‘, LPA ë¶„ë¥˜ê¸°ë¡œ ìœ í˜• ê²°ì •, êµì‚¬ëª…/ë‚ ì§œ/í•™êµê¸‰ JSONì—ì„œ ë™ì  ì¶”ì¶œ) |
| `shared/data/mockData.ts` | ìƒ˜í”Œ í•™ê¸‰ ë°ì´í„° (4ê°œ ë°˜, 88ëª…) |
| `shared/data/aiPrompts.ts` | AI ê¸°ëŠ¥ë³„ ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ (analysis, record, dataHelper, assistant, classAnalysis) |
| `shared/services/ai.ts` | AI ì„œë¹„ìŠ¤ ì¶”ìƒí™” ë ˆì´ì–´ (Provider ì„ íƒ, ê¸°ëŠ¥ë³„ í”„ë¡¬í”„íŠ¸ ì ìš©) |
| `shared/services/gemini.ts` | Gemini API í˜¸ì¶œ (v1beta, 429 ì¬ì‹œë„, PII ë§ˆìŠ¤í‚¹) |
| `shared/utils/summaryGenerator.ts` | AI ì´í‰ ìƒì„± ë¡œì§ (11ê°œ ì¤‘ë¶„ë¥˜ â†’ 3ì¤„ ìš”ì•½) |
| `shared/utils/calculate4StepDiagnosis.ts` | 4ë‹¨ê³„ ì§„ë‹¨ ê³„ì‚° (ì¤‘ë¶„ë¥˜ â†’ Step 1~4, 8ìœ í˜• íŒì •, ì½”ì¹­ì „ëµ) |
| `shared/utils/piiMasking.ts` | ê°œì¸ì •ë³´ ë§ˆìŠ¤í‚¹ (ì´ë¦„, í•™ë²ˆ, ìƒë…„ì›”ì¼, í•™êµëª…) |
| `shared/services/unifiedCounselingService.ts` | í†µí•© ìƒë‹´ ì„œë¹„ìŠ¤ (ì¼ì •+ê¸°ë¡ í†µí•©, ë‹¤ì¤‘ í•™ìƒ ì§€ì›) |
| `shared/services/counselingService.ts` | ìƒë‹´ ê¸°ë¡ ì„œë¹„ìŠ¤ (ë ˆê±°ì‹œ, deprecated) |
| `shared/services/memoService.ts` | ê´€ì°° ë©”ëª¨ CRUD ì„œë¹„ìŠ¤ |
| `shared/services/schoolRecordService.ts` | ìƒí™œê¸°ë¡ë¶€ AI ìƒì„± ì„œë¹„ìŠ¤ |
| `features/ai-room/services/assistantService.ts` | AI Room ëŒ€í™” ì„œë¹„ìŠ¤ |
| `features/ai-room/services/contextBuilder.ts` | AI ì»¨í…ìŠ¤íŠ¸ ë¹Œë” (RAG, ë³„ì¹­ ì‹œìŠ¤í…œ) |
| `features/student-dashboard/services/dataHelperService.ts` | ë°ì´í„° í•´ì„ ë„ìš°ë¯¸ AI ì„œë¹„ìŠ¤ (7ê°œ ì§ˆë¬¸ë³„ í”„ë¡¬í”„íŠ¸) |
| `features/class-dashboard/hooks/useClassProfile.ts` | í•™ê¸‰ í”„ë¡œí•„ (ì¤‘ë¶„ë¥˜ merit score â†’ ê°•ì /ì•½ì  TOP 3, í•´ì„¤ë¬¸) |
| `features/class-dashboard/hooks/useClassDetailData.ts` | í•™ê¸‰ ìƒì„¸ ë°ì´í„° (38ê°œ ìš”ì¸ í‰ê· , ì˜ì—­ ê³„ì¸µ, ìœ„í—˜êµ° ë¶„ë¥˜) |

### ë¬¸ì„œ í´ë” êµ¬ì¡°

```
docs/
â”œâ”€â”€ meta-test/                    # META ê²€ì‚¬ ê´€ë ¨ ë¬¸ì„œ
â”‚   â”œâ”€â”€ 01_ê²€ì‚¬ê°œìš”.md
â”‚   â”œâ”€â”€ 02_ê²€ì‚¬êµ¬ì¡°.md
â”‚   â”œâ”€â”€ 03_ì ìˆ˜ì²´ê³„.md
â”‚   â”œâ”€â”€ 04_ë¬¸í•­ì •ë³´.md
â”‚   â”œâ”€â”€ 05_ê²°ê³¼í•´ì„.md
â”‚   â”œâ”€â”€ 06_LPAìœ í˜•ë¶„ë¥˜.md       # LPA ì•Œê³ ë¦¬ì¦˜ ìƒì„¸
â”‚   â”œâ”€â”€ 07_ì‹ ë¢°ë„ì§€í‘œ.md
â”‚   â”œâ”€â”€ 08_APIë°ì´í„°ëª¨ë¸.md
â”‚   â””â”€â”€ 09_ìƒí™œê¸°ë¡ë¶€_ê¸°ì¬ì •ì±….md
â”œâ”€â”€ META_AIì—ì´ì „íŠ¸_ê¸°ëŠ¥ì •ì˜ì„œ_v1.2.md
â””â”€â”€ dashboard-design.md
```

---

## ğŸ“Š ë°ì´í„° íƒ€ì…

```typescript
interface Student {
  id: string;
  classId: string;
  number: number;              // ì¶œì„ë²ˆí˜¸
  name: string;                // âš ï¸ AI ì „ì†¡ ì‹œ ì œì™¸
  schoolLevel: 'ì´ˆë“±' | 'ì¤‘ë“±';
  grade: number;
  assessments: Assessment[];
}

interface Assessment {
  id: string;
  studentId: string;
  round: 1 | 2;
  assessedAt: Date;
  tScores: number[];           // 38ê°œ Tì ìˆ˜
  predictedType: StudentType;
  typeConfidence: number;
  typeProbabilities: Record<string, number>;
  deviations: FactorDeviation[];       // ìœ í˜• í‰ê·  ëŒ€ë¹„ íŠ¹ì´ì  (ìƒìœ„ 3ê°œ)
  reliabilityWarnings: string[];       // ì‹ ë¢°ë„ ê²½ê³  ('ì‚¬íšŒì ë°”ëŒì§ì„±' | 'ë°˜ì‘ì¼ê´€ì„±' | 'ì—°ì†ë™ì¼ë°˜ì‘')
  attentionResult: AttentionResult;    // ê´€ì‹¬ í•„ìš” íŒë³„ ê²°ê³¼
}

interface AttentionResult {
  needsAttention: boolean;
  reasons: AttentionReason[];  // ëŒ€ë¶„ë¥˜ë³„ ê´€ì‹¬ í•„ìš” ì‚¬ìœ 
}

interface AttentionReason {
  category: FactorCategory;    // 5ëŒ€ ì˜ì—­
  factors: { name: string; score: number }[];
  direction: 'low' | 'high';  // ì •ì  ìš”ì¸ ë‚®ìŒ / ë¶€ì  ìš”ì¸ ë†’ìŒ
}

interface Class {
  id: string;
  schoolLevel: 'ì´ˆë“±' | 'ì¤‘ë“±';
  grade: number;
  classNumber: number;
  teacherId: string;
  students: Student[];
  stats?: ClassStats;
}
```

### ë°ì´í„° íŒŒì´í”„ë¼ì¸

```
full_sample_data.json â†’ dataTransformer.ts â†’ mockData.ts â†’ ì»´í¬ë„ŒíŠ¸
```

- `dataTransformer.ts`ê°€ JSON ì›ë³¸ì„ í”„ë¡ íŠ¸ì—”ë“œ íƒ€ì…ìœ¼ë¡œ ë³€í™˜
- **JSON êµ¬ì¡°**: `examInfo` (ë©”íƒ€), `classes` â†’ `teacher` + `students` â†’ `test1`/`test2` (`rawScores`, `tScores`, `type`, `reliability`, `date`)
- ìš”ì¸ëª… ë§¤í•‘: `normalizeName()` (ê³µë°±/í•˜ì´í”ˆ ì œê±°) â†’ FACTORS ì¸ë±ìŠ¤ ë§¤í•‘
- `predictedType`: `classifyStudent(tScores, schoolLevel)` ë¡œ LPA ë¶„ë¥˜ê¸° ì§ì ‘ ì‹¤í–‰
- `typeProbabilities`: LPA ë¶„ë¥˜ê¸°ì˜ `allProbabilities` ì‚¬ìš©
- `reliabilityWarnings`: JSONì˜ `reliability` ë°°ì—´ ì§ì ‘ ì‚¬ìš©
- `attentionResult`: 38ê°œ Tì ìˆ˜ë¥¼ 5ëŒ€ ì˜ì—­ë³„ë¡œ ê²€ì‚¬
- `assessedAt`: JSONì˜ `testData.date` í•„ë“œì—ì„œ ë™ì  ì¶”ì¶œ
- `schoolLevel`: `examInfo.grade`ì—ì„œ ìë™ íŒë³„ (1~6: ì´ˆë“±, 7+: ì¤‘ë“±)
- `teacher.name`: ì²« ë²ˆì§¸ ë°˜ì˜ `teacher` í•„ë“œì—ì„œ ì¶”ì¶œ
- í•™ìƒ ë²ˆí˜¸: IDì—ì„œ ì¶”ì¶œ (`S0201` â†’ 1ë²ˆ)

### ê´€ì‹¬ í•„ìš” íŒë³„ (Attention Check)

| ìš”ì¸ ìœ í˜• | ê¸°ì¤€ | ì˜ˆì‹œ |
|-----------|------|------|
| ì •ì  ìš”ì¸ (isPositive=true) | T â‰¤ 39 | ìì•„ê°•ì , í•™ìŠµë””ë”¤ëŒ, ê¸ì •ì ê³µë¶€ë§ˆìŒ |
| ë¶€ì  ìš”ì¸ (isPositive=false) | T â‰¥ 60 | í•™ìŠµê±¸ë¦¼ëŒ, ë¶€ì •ì ê³µë¶€ë§ˆìŒ |

---

## ğŸ¨ UI ì»´í¬ë„ŒíŠ¸ ê°€ì´ë“œ

### ê³µí†µ ë””ìì¸ íŒ¨í„´

```tsx
// ì¹´ë“œ ê¸°ë³¸ ìŠ¤íƒ€ì¼
<div className="bg-white rounded-lg shadow-sm border border-gray-200 p-6">

// ì¹´ë“œ ë‚´ ì„¹ì…˜ ë¶„ë¦¬
<div className="border-b border-gray-200 pb-6 mb-6">

// ê·¸ë¼ë°ì´ì…˜ ë°°ê²½ (AI Insight)
<div className="bg-gradient-to-br from-indigo-50 via-blue-50 to-purple-50 rounded-xl p-6">

// ì¢Œìš° ë¹„ìœ¨ ë ˆì´ì•„ì›ƒ (40:60)
<div className="grid grid-cols-1 md:grid-cols-5 gap-8">
  <div className="md:col-span-2">{/* 40% */}</div>
  <div className="md:col-span-3">{/* 60% */}</div>
</div>
```

### ìœ í˜• ë°°ì§€

```tsx
const TypeBadge: React.FC<{ type: string }> = ({ type }) => (
  <span className={`px-2 py-1 rounded-full text-xs font-medium ${TYPE_COLORS[type]}`}>
    {type}
  </span>
);
```

### ì°¨íŠ¸ ê³µí†µ ì„¤ì •

```tsx
// Recharts ê³µí†µ
<YAxis domain={[20, 80]} />
<ReferenceLine y={50} stroke="#888" strokeDasharray="3 3" label="ì „êµ­ í‰ê· " />

// ë§‰ëŒ€ ì°¨íŠ¸ ë‘¥ê·¼ ëª¨ì„œë¦¬
<Bar radius={[0, 4, 4, 0]} />

// ë„ë„› ì°¨íŠ¸
<Pie innerRadius={70} outerRadius={110} paddingAngle={2} cornerRadius={4} />
```

---

## ğŸ“ ëŒ€ì‹œë³´ë“œ êµ¬í˜„ ê°€ì´ë“œ

### L1: êµì‚¬ ì „ì²´ ë°˜ ëŒ€ì‹œë³´ë“œ

- `CategoryComparisonChart`: 5ëŒ€ ì˜ì—­ LineChart (Recharts)
- `TypeDistributionChart`: ìœ í˜• ë¶„í¬ Stacked Bar (Nivo)
- ìœ í˜• ë¶„í¬ í‘œì‹œ ìˆœì„œ (í´ë˜ìŠ¤ ì¹´ë“œ + Nivo ì°¨íŠ¸ ê³µí†µ):
  - ì´ˆë“±: ìì›ì†Œì§„í˜• â†’ ì•ˆì „ê· í˜•í˜• â†’ ëª°ì…ìì›í’ë¶€í˜•
  - ì¤‘ë“±: ë¬´ê¸°ë ¥í˜• â†’ ì •ì„œì¡°ì ˆì·¨ì•½í˜• â†’ ìê¸°ì£¼ë„ëª°ì…í˜•

### L2: ë°˜ ëŒ€ì‹œë³´ë“œ

#### TypeChangeChart ì»´í¬ë„ŒíŠ¸

```typescript
// ìƒíƒœ ê´€ë¦¬
const [selectedSegment, setSelectedSegment] = useState<{
  round: 1 | 2;
  type: string;
  x: number;
  y: number;
} | null>(null);

const [selectedFlow, setSelectedFlow] = useState<FlowData | null>(null);
```

**ì£¼ìš” ê¸°ëŠ¥**:
- ë§‰ëŒ€ í˜¸ë²„/í´ë¦­ â†’ í•™ìƒ ëª©ë¡ íˆ´íŒ (í…Œë‘ë¦¬ ìƒ‰ìƒ = ìœ í˜• ìƒ‰ìƒ)
- íë¦„ì„  í´ë¦­ â†’ í•˜ë‹¨ ë³€í™” ë°•ìŠ¤ í‘œì‹œ

#### í•™ìƒ ëª©ë¡ í…Œì´ë¸” (ClassDashboardPage)

**í•„í„° (ChangeFilterButtons)**:
```tsx
type ChangeFilter = 'all' | 'reliability-warning' | 'need-attention' | 'negative' | 'positive' | 'not-assessed';
// ì „ì²´ | ì‹ ë¢°ë„ ì£¼ì˜ | ê´€ì‹¬ í•„ìš” | ë¶€ì • ë³€í™” | ê¸ì • ë³€í™” | 2ì°¨ ë¯¸ì‹¤ì‹œ
```

**ì¹¼ëŸ¼ êµ¬ì¡° (7ì¹¼ëŸ¼)**:
```
ë²ˆí˜¸(w-16) | ì´ë¦„(w-24) | 1ì°¨ ìœ í˜•(w-32) | 1ì°¨ ìƒíƒœ(w-36) | ë³€í™”(w-16) | 2ì°¨ ìœ í˜•(w-32) | 2ì°¨ ìƒíƒœ(w-36)
```

**ìƒíƒœ ë°°ì§€**:
- ê´€ì‹¬ í•„ìš”: `bg-amber-50 text-amber-600 border-amber-200` + AlertTriangle ì•„ì´ì½˜
- ì‹ ë¢°ë„ ì£¼ì˜: `bg-red-50 text-red-600 border-red-200` + ShieldAlert ì•„ì´ì½˜
- ì°¨ìˆ˜ë³„ ë…ë¦½ í‘œì‹œ (1ì°¨/2ì°¨ ê°ê°)

**ë³€í™” ì¸ë””ì¼€ì´í„°**:
- `+` ê¸ì •: `bg-emerald-100 text-emerald-600` (w-8 h-8 ì›í˜•)
- `-` ë¶€ì •: `bg-red-100 text-red-600`
- `=` ë™ì¼: `bg-gray-100 text-gray-400`
- `--` 2ì°¨ ë¯¸ì‹¤ì‹œ: `text-gray-300`

#### ClassInsights ì»´í¬ë„ŒíŠ¸

- `useClassProfile` í›…ìœ¼ë¡œ merit score ê¸°ë°˜ ê°•ì  TOP 3 / ì•½ì  TOP 3 ì‚°ì¶œ
- ê°•ì : `accent="emerald"`, ì•½ì : `accent="red"`ë¡œ `ProfileItem` ë Œë”ë§
- ì¶”ì²œ í•™ê¸‰ í™œë™ 3ê°œ (í•˜ë“œì½”ë”©)
- "ìƒì„¸ ë¶„ì„" ë²„íŠ¼ â†’ `/dashboard/class/:classId/analysis` ë¼ìš°íŒ…

### L2.5: í•™ê¸‰ íŠ¹ì„± ìƒì„¸ ë¶„ì„

**ê²½ë¡œ**: `/dashboard/class/:classId/analysis`

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
ClassDetailAnalysisPage
â”œâ”€â”€ Header (í•™ë…„/ë°˜ + ë’¤ë¡œê°€ê¸°)
â”œâ”€â”€ RoundSelector (1ì°¨/2ì°¨ ì„ íƒ)
â”œâ”€â”€ Section 1: í•™ê¸‰ ì¢…í•© ë¶„ì„
â”‚   â””â”€â”€ ClassSummarySection
â”‚       â”œâ”€â”€ AI ì´í‰ (callAI, feature: 'classAnalysis' â†’ overall + keyPoint)
â”‚       â””â”€â”€ ê°•ì /ì•½ì  ì¹´ë“œ (useClassProfile ê¸°ë°˜ â†’ L2ì™€ ë™ì¼ ë°ì´í„°)
â”œâ”€â”€ Section 2: 38ê°œ ì„¸ë¶€ ìš”ì¸ ë¶„ì„
â”‚   â””â”€â”€ FactorHeatmapSection
â”‚       â”œâ”€â”€ ëŒ€ë¶„ë¥˜ë³„ ê·¸ë£¹ (ì •ì =emerald, ë¶€ì =rose)
â”‚       â”œâ”€â”€ ì¤‘ë¶„ë¥˜ ë“œë¡­ë‹¤ìš´ â†’ ì†Œë¶„ë¥˜ í¼ì¹¨
â”‚       â””â”€â”€ FactorBar + LevelBadge
â”œâ”€â”€ Section 3: ê´€ì‹¬ í•„ìš” í•™ìƒ
â”‚   â””â”€â”€ RiskStudentsSection (ê¸´ê¸‰/ê´€ì°° 2ë‹¨ í…Œì´ë¸”)
â””â”€â”€ Section 4: í•™ê¸‰ ë§ì¶¤ ìš´ì˜ ì „ëµ
    â””â”€â”€ StrategySection (ì•½ì  ê¸°ë°˜ ì „ëµ ì¹´ë“œ 3ê°œ + ì²´í¬ë¦¬ìŠ¤íŠ¸)
```

#### í•µì‹¬ í›…

| í›… | ì—­í•  |
|------|------|
| `useClassProfile` | ì¤‘ë¶„ë¥˜ merit score â†’ ê°•ì  TOP 3 / ì•½ì  TOP 3, Tì ìˆ˜ êµ¬ê°„ë³„ í•´ì„¤ë¬¸ |
| `useClassDetailData` | 38ê°œ ìš”ì¸ í‰ê· , 5ëŒ€ ì˜ì—­ ê³„ì¸µ êµ¬ì¡°, ìœ„í—˜êµ° í•™ìƒ ë¶„ë¥˜ |

### L3: í•™ìƒ ëŒ€ì‹œë³´ë“œ

#### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
StudentDashboardPage
â”œâ”€â”€ Header (í•™ìƒ ì •ë³´ + ë„¤ë¹„ê²Œì´ì…˜ + íŒ¨ë„ ë²„íŠ¼)
â”‚   â””â”€â”€ PANEL_BUTTONS: [ìƒê¸°ë¶€, ìƒë‹´, ê´€ì°°]
â”œâ”€â”€ RoundSelector (1ì°¨/2ì°¨ ì„ íƒ)
â”œâ”€â”€ Section 1: í•™ìƒ ì§„ë‹¨ ê²°ê³¼ í•´ì„ (A/B í† ê¸€: ì¤‘ë¶„ë¥˜ ìš”ì¸ / 4ë‹¨ê³„ í•´ì„)
â”‚   â”œâ”€â”€ DiagnosisSummary (AI ì´í‰)
â”‚   â”œâ”€â”€ FactorLineChart (11ê°œ ì¤‘ë¶„ë¥˜) â€” chartViewMode='midCategory'
â”‚   â””â”€â”€ FourStepInterpretation (4ë‹¨ê³„ í•´ì„ ê°€ì´ë“œ) â€” chartViewMode='fourStep'
â”œâ”€â”€ Section 2: í•™ìŠµ ìœ í˜• ì•Œì•„ë³´ê¸°
â”‚   â”œâ”€â”€ TypeClassification (ë„ë„› ì°¨íŠ¸)
â”‚   â”œâ”€â”€ TypeDeviations (íŠ¹ì´ì  3ê°œ)
â”‚   â””â”€â”€ CoachingStrategy (ëª¨ë‹¬)
â”œâ”€â”€ DataHelperChatbot (í”Œë¡œíŒ… ë°ì´í„° í•´ì„ ë„ìš°ë¯¸)
â”‚   â”œâ”€â”€ DataHelperQuestions (2ë‹¨ ì§ˆë¬¸ ëª©ë¡)
â”‚   â””â”€â”€ DataHelperAnswer (AI ë‹µë³€ í‘œì‹œ)
â””â”€â”€ RightPanel (ìš°ì¸¡ í‘¸ì‹œ íŒ¨ë„)
    â”œâ”€â”€ SchoolRecordPanel (ìƒí™œê¸°ë¡ë¶€ AI ë¬¸êµ¬ ìƒì„±)
    â”œâ”€â”€ CounselingRecordPanel (ìƒë‹´ ê¸°ë¡ CRUD)
    â””â”€â”€ ObservationMemoPanel (ê´€ì°° ë©”ëª¨ + íƒœê·¸)
```

#### RightPanel (ìš°ì¸¡ ìŠ¬ë¼ì´ë“œ íŒ¨ë„)

```tsx
// íŒ¨ë„ íƒ­ íƒ€ì…
type PanelTab = 'schoolRecord' | 'counseling' | 'observation' | null;

// í—¤ë” ë²„íŠ¼ í´ë¦­ ì‹œ íŒ¨ë„ ì—´ê¸°
const [panelTab, setPanelTab] = useState<PanelTab>(null);

// íŒ¨ë„ ì»´í¬ë„ŒíŠ¸
<RightPanel
  isOpen={panelTab !== null}
  activeTab={panelTab}
  onTabChange={setPanelTab}
  onClose={() => setPanelTab(null)}
  studentId={studentId}
  classId={classId}
  tScores={tScores}
  predictedType={predictedType}
/>
```

**íŒ¨ë„ íŠ¹ì§•**:
- `w-96` (384px) ê³ ì • ë„ˆë¹„, í‘¸ì‹œ ë ˆì´ì•„ì›ƒ (flex í˜•ì œ ìš”ì†Œ)
- ESC í‚¤ë¡œ ë‹«ê¸° ì§€ì›
- íŒ¨ë„ í™œì„±í™” ì‹œ ì¢Œì¸¡ íŒ¨ë„ ë²„íŠ¼ ìˆ¨ê¹€ (íŒ¨ë„ í—¤ë” íƒ­ìœ¼ë¡œ ì „í™˜)
- `self-stretch`ë¡œ ì¢Œì¸¡ ì½˜í…ì¸ ì™€ ë™ì¼ ë†’ì´

#### FourStepInterpretation (4ë‹¨ê³„ í•´ì„ ê°€ì´ë“œ)

Section 1 "í•™ìƒ ì§„ë‹¨ ê²°ê³¼ í•´ì„"ì˜ A/B í† ê¸€(`chartViewMode`)ë¡œ FactorLineChartì™€ ì „í™˜ ê°€ëŠ¥í•œ 4ë‹¨ê³„ í•´ì„ ì»´í¬ë„ŒíŠ¸.

```
FourStepInterpretation({ tScores, studentName })
â”œâ”€â”€ ê°€ì´ë“œ í—¤ë” ("4ë‹¨ê³„ í•´ì„ ê°€ì´ë“œ")
â”œâ”€â”€ StepCard Ã— 4 (ì•„ì½”ë””ì–¸)
â”‚   â”œâ”€â”€ Step 1: ê³µë¶€ ë§ˆìŒ (í•™ì—…ì—´ì˜, ì„±ì¥ë ¥, í•™ì—…ì†Œì§„)
â”‚   â”œâ”€â”€ Step 2: ê³µë¶€ ìì› (ê°œì¸/í™˜ê²½/ë°©í•´)
â”‚   â”œâ”€â”€ Step 3: ê³µë¶€ ê¸°ìˆ  (í•™ìŠµ ì¬ì„¤ê³„/ë§ˆìŒ ì¬ì„¤ê³„)
â”‚   â””â”€â”€ Step 4: í•™ìŠµ ìœ í˜• (ì‚¬ë¶„ë©´ ê·¸ë˜í”„ + 8ìœ í˜• ì •ë³´ ì¹´ë“œ)
â”œâ”€â”€ SubSection (ì¤‘ë¶„ë¥˜ ê·¸ë£¹ + LevelBadge)
â””â”€â”€ BarItem (Tì ìˆ˜ ë§‰ëŒ€ + í•˜ìœ„ ì†Œë¶„ë¥˜ ë“œë¡­ë‹¤ìš´)
```

**ì„¤ê³„ ê·œì¹™**:
- Tì ìˆ˜ ë²”ìœ„: 20~80 ê¸°ì¤€ `(score - 20) / 60 * 100` (T=50ì´ ì •í™•íˆ 50% ì¤‘ì•™)
- 5ë‹¨ê³„ ë ˆë²¨: ë§¤ìš°ë†’ìŒ(â‰¥70), ë†’ìŒ(â‰¥60), ë³´í†µ(â‰¥40), ë‚®ìŒ(â‰¥30), ë§¤ìš°ë‚®ìŒ(<30)
- ë§‰ëŒ€ ìƒ‰ìƒ: ì •ì =`#22C55E`(green), ë¶€ì =`#F43F5E`(rose)
- ì‚¬ë¶„ë©´ dot: ê³µë¶€ê¸°ìˆ  â‰¥50 â†’ blue-600, <50 â†’ red-500
- 8ìœ í˜•: ì‚¬ë¶„ë©´(ë§ˆìŒÃ—ìì›) Ã— ê¸°ìˆ (ë†’/ë‚®), `calculate4StepDiagnosis.ts`ì—ì„œ ê³„ì‚°

#### DataHelperChatbot (ë°ì´í„° í•´ì„ ë„ìš°ë¯¸)

L3 í•™ìƒ ëŒ€ì‹œë³´ë“œì— í”Œë¡œíŒ… í˜•íƒœë¡œ ì œê³µë˜ëŠ” AI ì§ˆë¬¸-ë‹µë³€ ë„ìš°ë¯¸ì…ë‹ˆë‹¤.

```
src/features/student-dashboard/
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ DataHelperChatbot.tsx      # ë©”ì¸ ì»¨í…Œì´ë„ˆ (FAB + ì±—ë´‡ ì°½)
â”‚   â”œâ”€â”€ DataHelperQuestions.tsx     # 2ë‹¨ ì§ˆë¬¸ ëª©ë¡ (ì§„ë‹¨ 4 + ìœ í˜• 3)
â”‚   â””â”€â”€ DataHelperAnswer.tsx       # AI ë‹µë³€ í‘œì‹œ (ë§ˆí¬ë‹¤ìš´ ë Œë”ë§)
â””â”€â”€ services/
    â””â”€â”€ dataHelperService.ts       # ì§ˆë¬¸ë³„ AI í”„ë¡¬í”„íŠ¸ ë§¤í•‘ + í˜¸ì¶œ
```

**ì§ˆë¬¸ êµ¬ì¡° (7ê°œ)**:
- ì§„ë‹¨ í•´ì„: ì´í‰ ìƒì„¸ / 11ê°œ ìš”ì¸ / ê°•ì  / ë³´ì™„ì 
- ìœ í˜• í•´ì„: ì „ì²´ ìœ í˜• íŠ¹ì§• / ìœ í˜• ì„¸ë¶€íŠ¹ì„± / ê°œì¸ë³„ íŠ¹ì„±

**ì£¼ìš” íŠ¹ì§•**:
- FAB ë²„íŠ¼: `fixed bottom-6 right-6`, indigo-purple ê·¸ë¼ë°ì´ì…˜
- ì±—ë´‡ ì°½: `fixed bottom-24 right-6`, w-[420px] h-[560px]
- ë‹µë³€ ìºì‹±: ê°™ì€ ì§ˆë¬¸ ì¬í´ë¦­ ì‹œ API í˜¸ì¶œ ì—†ìŒ
- í•™ìƒ ë³€ê²½ ì‹œ ìºì‹œ ìë™ ì´ˆê¸°í™”
- í•˜ë‹¨ "AI ì–´ì‹œìŠ¤í„´íŠ¸ë¡œ ì´ë™í•˜ê¸°" ë²„íŠ¼ â†’ `/ai-room` ë¼ìš°íŒ…

**ë°ì´í„° íë¦„**:
```
DataHelperChatbot(props: tScores, predictedType, typeProbabilities, schoolLevel, deviations)
  â””â”€â”€ dataHelperService.getDataHelperAnswer(questionId, studentData)
       â”œâ”€â”€ getSubCategoryResults(tScores) â† summaryGenerator.ts
       â”œâ”€â”€ getTypeInfo(type, schoolLevel) â† lpaClassifier.ts
       â””â”€â”€ callAI({ messages, temperature: 0.4 }) â† ai.ts
```

#### íŠ¸ë Œë””í•œ ë””ìì¸ ìš”ì†Œ

| ìš”ì†Œ | ì ìš© |
|------|------|
| ê·¸ë¼ë°ì´ì…˜ | SVG linearGradient, `bg-gradient-to-br` |
| ë‘¥ê·¼ ëª¨ì„œë¦¬ | `cornerRadius={4}`, `rounded-xl` |
| ë°˜íˆ¬ëª… | `bg-white/60`, `backdrop-blur-sm` |
| ê·¸ë¦¼ì | `shadow-sm`, `shadow-lg` |

---

## ğŸ” ê°œì¸ì •ë³´ ë³´í˜¸

### AI ì „ì†¡ ê¸ˆì§€ ì •ë³´

```typescript
// âŒ ì ˆëŒ€ AIì— ì „ì†¡ ê¸ˆì§€
interface PIIData {
  name: string;
  studentId: string;
  birthDate: Date;
  schoolName: string;
}

// âœ… AI ì „ì†¡ ê°€ëŠ¥
interface SafeData {
  schoolLevel: 'ì´ˆë“±' | 'ì¤‘ë“±';
  grade: number;
  studentType: string;
  tScores: number[];
  typeConfidence: number;
}
```

---

## ğŸ¤– AI ì–´ì‹œìŠ¤í„´íŠ¸ êµ¬í˜„ ê°€ì´ë“œ

### ê°œìš”

AI ì–´ì‹œìŠ¤í„´íŠ¸ëŠ” êµì‚¬ê°€ í•™ìƒ ê²€ì‚¬ ê²°ê³¼ë¥¼ AIì™€ ëŒ€í™”í•˜ë©° ë¶„ì„í•  ìˆ˜ ìˆëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

**ê²½ë¡œ**: `/ai-room`

### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
src/features/ai-room/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ AIRoomPage.tsx          # ë©”ì¸ í˜ì´ì§€
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ ChatArea.tsx            # ì±„íŒ… ë©”ì‹œì§€ ì˜ì—­
â”‚   â”œâ”€â”€ QuickPrompts.tsx        # ë¹ ë¥¸ ì§ˆë¬¸ ì‚¬ì´ë“œë°”
â”‚   â”œâ”€â”€ StudentPickerModal.tsx  # í•™ìƒ ì„ íƒ ëª¨ë‹¬
â”‚   â””â”€â”€ index.ts
â”œâ”€â”€ types.ts                    # íƒ€ì… ì •ì˜
â””â”€â”€ index.ts
```

### í•µì‹¬ íƒ€ì…

```typescript
// ì»¨í…ìŠ¤íŠ¸ ëª¨ë“œ: ì „ì²´ / ë°˜ë³„ / ê°œë³„
type ContextMode = 'all' | 'class' | 'student';

// ì±„íŒ… ë©”ì‹œì§€
interface ChatMessage {
  id: string;
  role: 'user' | 'assistant';
  content: string;
  timestamp: Date;
}

// ëŒ€í™” ê¸°ë¡
interface Conversation {
  id: string;
  title: string;
  messages: ChatMessage[];
  createdAt: Date;
  mode: ContextMode;
  contextLabel?: string; // "6-2ë°˜", "í•™ìƒ 3ëª…" ë“±
}

// í•™ìƒ ë³„ì¹­ ë§µ (ê°œì¸ì •ë³´ ë³´í˜¸)
interface StudentAliasMap {
  [alias: string]: string; // student_A â†’ ì‹¤ì œì´ë¦„
}
```

### ì£¼ìš” ê¸°ëŠ¥

1. **ì»¨í…ìŠ¤íŠ¸ ëª¨ë“œ ì„ íƒ**
   - ì „ì²´: ë‹´ë‹¹ í•™ê¸‰ ì „ì²´ ë¶„ì„
   - ë°˜ë³„: íŠ¹ì • ë°˜ ì„ íƒ í›„ ë¶„ì„
   - ê°œë³„: 1ëª… ë˜ëŠ” ë‹¤ìˆ˜ í•™ìƒ ì„ íƒ

2. **ëŒ€í™” ê¸°ë¡ ê´€ë¦¬**
   - ì¢Œì¸¡ ì‚¬ì´ë“œë°”ì— ëŒ€í™” ëª©ë¡ í‘œì‹œ
   - ìƒˆ ëŒ€í™” ìƒì„± / ì‚­ì œ / ì „í™˜
   - ì»¨í…ìŠ¤íŠ¸ ë¼ë²¨ ë°°ì§€ë¡œ ëª¨ë“œ êµ¬ë¶„

3. **ë¹ ë¥¸ ì§ˆë¬¸**
   - ëª¨ë“œë³„ ë§ì¶¤ í”„ë¡¬í”„íŠ¸ ì œê³µ
   - ê° í•­ëª©ì— ì„¤ëª…ë¬¸ í¬í•¨
   - í´ë¦­ ì‹œ ì…ë ¥ì°½ì— ìë™ ì…ë ¥

4. **í•™ìƒ ë³„ì¹­ ì‹œìŠ¤í…œ**
   - AI ì „ì†¡ ì‹œ í•™ìƒ ì´ë¦„ ë§ˆìŠ¤í‚¹ (student_A, student_B...)
   - UI í‘œì‹œ ì‹œ ì‹¤ì œ ì´ë¦„ìœ¼ë¡œ ë³€í™˜

### ë¹ ë¥¸ ì§ˆë¬¸ ì¹´í…Œê³ ë¦¬

| ëª¨ë“œ | í”„ë¡¬í”„íŠ¸ ì˜ˆì‹œ |
|------|---------------|
| **ì „ì²´** | ì „ì²´ í˜„í™©, ê´€ì‹¬ í•™ìƒ, ë°˜ë³„ ë¹„êµ, ë³€í™” ì¶”ì´ |
| **ë°˜ë³„** | ë°˜ ë¶„ì„, ìœ í˜• ë¶„í¬, ì¢Œì„ ë°°ì¹˜, ë˜ë˜ ë§¤ì¹­ |
| **ê°œë³„(1ëª…)** | ê²°ê³¼ ìš”ì•½, ìƒë‹´ ê¸°ë²•, ìƒê¸°ë¶€ ë¬¸êµ¬, ê°€ì •ì—°ê³„ |
| **ê°œë³„(ë‹¤ìˆ˜)** | ê´€ê³„ì„± ë¶„ì„, ê²°ê³¼ ë¹„êµ, ê·¸ë£¹ ìƒë‹´, ëª¨ë‘  êµ¬ì„± |

### ìŠ¤íƒ€ì¼ ê°€ì´ë“œ

```tsx
// ëŒ€í™” ê¸°ë¡ ë°°ì§€ ìƒ‰ìƒ
const modeBadgeColors = {
  all: 'bg-gray-100 text-gray-600',
  class: 'bg-blue-100 text-blue-600',
  student: 'bg-green-100 text-green-600',
};

// AI ë©”ì‹œì§€ ìŠ¤íƒ€ì¼
<div className="bg-white border border-gray-100 rounded-2xl rounded-tl-sm p-4 shadow-sm">
  <div className="flex items-center gap-1 mb-2 text-xs text-primary-500 font-medium">
    <Sparkles className="w-3 h-3" />
    <span>AI ë¶„ì„</span>
  </div>
  {/* ë©”ì‹œì§€ ë‚´ìš© */}
</div>

// ì‚¬ìš©ì ë©”ì‹œì§€ ìŠ¤íƒ€ì¼
<div className="bg-primary-500 text-white rounded-2xl rounded-tr-sm p-4">
  {/* ë©”ì‹œì§€ ë‚´ìš© */}
</div>
```

---

## ğŸ“… ìƒë‹´ì¼ì • ê¸°ëŠ¥ êµ¬í˜„ ê°€ì´ë“œ

### ê°œìš”

ìƒë‹´ì¼ì •ì€ êµì‚¬ê°€ í•™ìƒ ìƒë‹´ì„ ê³„íší•˜ê³  ê´€ë¦¬í•˜ë©°, ì™„ë£Œëœ ìƒë‹´ì„ ê¸°ë¡í•˜ëŠ” ê¸°ëŠ¥ì…ë‹ˆë‹¤.

**ê²½ë¡œ**: `/schedule`

### ì»´í¬ë„ŒíŠ¸ êµ¬ì¡°

```
src/features/schedule/
â”œâ”€â”€ pages/
â”‚   â””â”€â”€ SchedulePage.tsx         # ë©”ì¸ í˜ì´ì§€ (ì£¼ê°„/ì›”ê°„ ìº˜ë¦°ë”)
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ WeeklyCalendar.tsx       # ì£¼ê°„ ìº˜ë¦°ë” ë·°
â”‚   â”œâ”€â”€ MonthlyCalendar.tsx      # ì›”ê°„ ìº˜ë¦°ë” ë·°
â”‚   â”œâ”€â”€ ScheduleModal.tsx        # ì¼ì • ì¶”ê°€/ìˆ˜ì •/ì™„ë£Œ ëª¨ë‹¬
â”‚   â”œâ”€â”€ DateDetailPanel.tsx      # ë‚ ì§œ ìƒì„¸ íŒ¨ë„ (ì›”ê°„ ë·°)
â”‚   â”œâ”€â”€ ClassSummaryCards.tsx    # í•™ê¸‰ë³„ ìš”ì•½ ì¹´ë“œ
â”‚   â”œâ”€â”€ ScheduleStudentPicker.tsx # í•™ìƒ ì„ íƒ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ CalendarIntegrationModal.tsx # ìº˜ë¦°ë” ì—°ë™ (TODO)
â””â”€â”€ index.ts
```

### í•µì‹¬ íƒ€ì…

```typescript
// ìƒë‹´ ìƒíƒœ
type CounselingStatus = 'scheduled' | 'completed' | 'cancelled';

// í†µí•© ìƒë‹´ ê¸°ë¡
interface UnifiedCounselingRecord {
  id: string;
  students: CounselingStudent[];     // 1ëª… ì´ìƒ ì§€ì›
  classId: string;
  scheduledAt: string;               // 'YYYY-MM-DD HH:mm'
  duration?: number;                 // ìƒë‹´ ì‹œê°„ (ë¶„)
  types: ScheduleType[];             // regular, urgent, follow-up, initial
  areas: CounselingArea[];           // academic, career, peer ë“± 8ê°œ
  methods: CounselingMethod[];       // face-to-face, phone, video, group
  status: CounselingStatus;
  reason?: string;                   // ì˜ˆì • ì‹œ ë©”ëª¨
  summary?: string;                  // ì™„ë£Œ ì‹œ ìƒë‹´ ê¸°ë¡
  nextSteps?: string;                // í›„ì† ì¡°ì¹˜
  createdAt: Date;
  updatedAt: Date;
}
```

### ì£¼ìš” ê¸°ëŠ¥

1. **ì£¼ê°„/ì›”ê°„ ìº˜ë¦°ë” ë·°**
   - ë°˜ë³„ í•„í„°ë§ (ìƒ‰ìƒ ì½”ë“œ)
   - ì™„ë£Œëœ ìƒë‹´ ì‹œê°ì  êµ¬ë¶„ (ì²´í¬ ì•„ì´ì½˜, íšŒìƒ‰ ë°°ê²½)
   - ê¸´ê¸‰ í‘œì‹œ (ë¹¨ê°„ ì•„ì´ì½˜, ì˜ˆì •ëœ ìƒë‹´ë§Œ)

2. **ìƒë‹´ ì¼ì • CRUD**
   - ë³µìˆ˜ í•™ìƒ ì„ íƒ
   - ë³µìˆ˜ ìƒë‹´ ìœ í˜•/ì˜ì—­/ë°©ë²• ì„ íƒ
   - ë‚ ì§œ/ì‹œê°„ ì„ íƒ

3. **ìƒë‹´ ì™„ë£Œ ì²˜ë¦¬**
   - ì™„ë£Œ ë²„íŠ¼ â†’ ìƒíƒœ ë³€ê²½
   - ìƒë‹´ ê¸°ë¡ ì‘ì„±
   - L3 í•™ìƒ ëŒ€ì‹œë³´ë“œ ìƒë‹´ íƒ­ê³¼ ë™ê¸°í™”

### ìƒíƒœë³„ ìŠ¤íƒ€ì¼

```tsx
// ì™„ë£Œëœ ìƒë‹´
<button className="bg-gray-50 text-gray-500">
  <CheckCircle2 className="text-emerald-500" />
</button>

// ì˜ˆì •ëœ ìƒë‹´
<button className="bg-white text-gray-900">
  {isUrgent && <AlertCircle className="text-red-500" />}
</button>
```

### í†µí•© ìƒë‹´ ì„œë¹„ìŠ¤

```typescript
// L3 ìƒë‹´ íƒ­ê³¼ ë™ì¼í•œ ì„œë¹„ìŠ¤ ì‚¬ìš©
import { unifiedCounselingService } from '@/shared/services/unifiedCounselingService';

// ëª¨ë“  ìƒë‹´ ì¡°íšŒ (ì·¨ì†Œ ì œì™¸)
const activeRecords = records.filter(r => r.status !== 'cancelled');
```

---

## ğŸš« ê¸ˆì§€ ì‚¬í•­

1. ê°œì¸ì •ë³´ AI ì „ì†¡ (ì´ë¦„, í•™ë²ˆ, ìƒë…„ì›”ì¼)
2. í•˜ë“œì½”ë”©ëœ í•™ìƒ ë°ì´í„° (`mockData.ts` ì™¸)
3. ì¸ë¼ì¸ ìŠ¤íƒ€ì¼ (TailwindCSS ì‚¬ìš©)
4. `any` íƒ€ì… ì‚¬ìš©
5. `console.log` ë‚¨ê¸°ê¸°
6. ìƒëŒ€ ê²½ë¡œ ì„í¬íŠ¸ (`@/` ì‚¬ìš©)

---

## âœ… ì²´í¬ë¦¬ìŠ¤íŠ¸

### ìƒˆ ì»´í¬ë„ŒíŠ¸ ìƒì„± ì‹œ
- [ ] TypeScript ì¸í„°í˜ì´ìŠ¤ ì •ì˜
- [ ] Props íƒ€ì… ëª…ì‹œ
- [ ] TailwindCSSë¡œ ìŠ¤íƒ€ì¼ë§
- [ ] ë°˜ì‘í˜• ê³ ë ¤ (sm, md, lg)
- [ ] ë¡œë”©/ì—ëŸ¬ ìƒíƒœ ì²˜ë¦¬
- [ ] ì ‘ê·¼ì„± ê³ ë ¤ (aria-label)

### AI ê¸°ëŠ¥ êµ¬í˜„ ì‹œ
- [ ] PII ë§ˆìŠ¤í‚¹ ì ìš©
- [ ] ì—ëŸ¬ í•¸ë“¤ë§
- [ ] ë¡œë”© ìƒíƒœ UI
- [ ] ì‘ë‹µ ìŠ¤íŠ¸ë¦¬ë° ê³ ë ¤

---

## ğŸ”— ì°¸ê³  ë§í¬

| ë¶„ë¥˜ | ë§í¬ |
|------|------|
| React | https://react.dev/ |
| TypeScript | https://www.typescriptlang.org/docs/ |
| TailwindCSS | https://tailwindcss.com/docs |
| Recharts | https://recharts.org/en-US/ |
| Nivo | https://nivo.rocks/bar/ |
| Lucide Icons | https://lucide.dev/guide/packages/lucide-react |
| React Router | https://reactrouter.com/en/main |

---

**Last Updated**: 2026-02-09
**Version**: 2.5 (í•™ê¸‰ ìƒì„¸ ë¶„ì„ í˜ì´ì§€, classAnalysis í”„ë¡¬í”„íŠ¸)
