# META 학습종합검사 신뢰도 지표

## 1. 개요

### 1.1 신뢰도 지표란?
검사 결과를 해석하기 전에 **수검자가 검사에 솔직하고 성실하게 응답하였는지**를 확인하는 지표입니다.

### 1.2 신뢰도 지표 종류

| 지표 | 설명 | 판정 기준 |
|------|------|-----------|
| 사회적 바람직성 | 타인에게 의도적으로 잘 보이려고 하는 정도 | T점수 65점 이상 → 주의 |
| 반응 일관성 | 유사한 문항에 동일하게 응답하는 정도 | T점수 65점 이상 → 주의 |
| 연속동일반응 | 동일한 번호를 연속해서 선택하는 경우 | 10개 이상 연속 → 예 |

### 1.3 주의 판정 시 처리

> **3가지 중 1가지라도 "주의" 또는 "예"가 나올 때:**
> 1. 학생과 교사에게 검사의 신뢰성에 대한 주의를 안내
> 2. 교사 반 평균 산정 시 해당 학생은 **제외**하고 값 산출

---

## 2. 사회적 바람직성 (Social Desirability)

### 2.1 정의
타인에게 의도적으로 잘 보이려고 하는 경향성을 측정합니다.

### 2.2 측정 문항 (3문항)

| 대분류 | 중분류 | 변인명 | 문항순서 | 문항 내용 |
|--------|--------|--------|----------|-----------|
| 자아 강점 | 대인관계능력 | 사회적 바람직성 | 82 | 나는 어떤 일이 있더라도 다른 사람과의 약속을 꼭 지킨다. |
| 학습 디딤돌 | 학습기술 | 사회적 바람직성 | 114 | 나는 어떤 결정을 내릴 때 실수가 없는 편이다. |
| 공부 마음 | 학업소진 | 사회적 바람직성 | 20 | 나는 내 자신에 대해 항상 정직하다. |

### 2.3 계산 방식

**T점수 계산:**
```
T = {(응답자 평균 - 기준 평균) / 기준 표준편차} × 10 + 50
```

### 2.4 기준 데이터 (학교급별)

| 학교급 | 평균 | 표준편차 |
|--------|------|----------|
| 초등 | 3.509402 | 0.758988 |
| 중등 | 3.353289 | 0.765197 |
| 고등 | 3.364198 | 0.705148 |

### 2.5 판정 기준

| 분류 | 조건 | 표시(색상) |
|------|------|-----------|
| **주의** | T점수 65점 이상 | 빨강 |
| 양호 | T점수 65점 미만 | - |

---

## 3. 반응 일관성 (Response Consistency)

### 3.1 정의
유사한 문항에 일관되게 응답하는 정도를 측정합니다.

### 3.2 측정 문항 쌍 (3쌍)

| 쌍 | 원본 문항 | 일관성 문항 | 문항 내용 |
|----|-----------|-------------|-----------|
| 1 | 48번 (시간관리) | 56번 (반응일관성) | 나는 시간 계획에 따라 규칙적으로 공부한다. |
| 2 | 64번 (수업부담) | 72번 (반응일관성) | 나는 수업 시간이 재미없고 지루하다. |
| 3 | 104번 (무능감) | 110번 (반응일관성) | 나는 공부를 아무리 열심히 해도 성적이 안 나온다. |

### 3.3 계산 방식

**Step 1: 반응 일관성 지표 계산**
```
반응일관성지표_1 = |문항48 응답 - 문항56 응답|
반응일관성지표_2 = |문항64 응답 - 문항72 응답|
반응일관성지표_3 = |문항104 응답 - 문항110 응답|
```

**Step 2: T점수 변환**
```
T = {(응답자 지표 평균 - 기준 평균) / 기준 표준편차} × 10 + 50
```

### 3.4 기준 데이터 (학교급별)

| 지표 | 초등 평균 | 초등 SD | 중등 평균 | 중등 SD | 고등 평균 | 고등 SD |
|------|-----------|---------|-----------|---------|-----------|---------|
| 지표 1 | 0.62141 | 0.818798 | 0.588235 | 0.796354 | 0.611212 | 0.811389 |
| 지표 2 | 0.597911 | 0.91537 | 0.5 | 0.739822 | 0.567812 | 0.865719 |
| 지표 3 | 0.436031 | 0.809277 | 0.547059 | 0.9362 | 0.470163 | 0.850999 |

### 3.5 판정 기준

| 분류 | 조건 | 표시(색상) |
|------|------|-----------|
| **주의** | T점수 65점 이상 | 빨강 |
| 양호 | T점수 65점 미만 | - |

---

## 4. 연속동일반응 (Consecutive Same Response)

### 4.1 정의
응답자가 동일한 번호(예: '5, 5, 5, 5, 5…')를 장기간 반복해서 선택하는 경우를 탐지합니다.

### 4.2 목적
- 문항을 잘 읽고 성실하게 답변했는지 확인
- 응답 피로(Fatigue) 또는 무성의한 태도 탐지

### 4.3 판정 기준

| 검사명 | 전체 문항 수 | 연속 동일 반응 기준 | 결과 | 표시(색상) |
|--------|-------------|-------------------|------|-----------|
| META 학습종합검사 | 124문항 | **10개 이상** | 예 | 빨강 |
| | | 10개 미만 | 아니오 | - |

### 4.4 계산 로직

```javascript
function checkConsecutiveSameResponse(responses) {
  let maxConsecutive = 1;
  let currentConsecutive = 1;
  
  for (let i = 1; i < responses.length; i++) {
    if (responses[i] === responses[i - 1]) {
      currentConsecutive++;
      maxConsecutive = Math.max(maxConsecutive, currentConsecutive);
    } else {
      currentConsecutive = 1;
    }
  }
  
  return {
    maxConsecutive: maxConsecutive,
    isWarning: maxConsecutive >= 10,
    result: maxConsecutive >= 10 ? '예' : '아니오'
  };
}
```

---

## 5. API 데이터 모델

### 5.1 신뢰도 지표 결과 (TypeScript)

```typescript
interface ReliabilityIndicators {
  socialDesirability: {
    rawMean: number;        // 원점수 평균
    tScore: number;         // T점수
    isWarning: boolean;     // 주의 여부
    status: '양호' | '주의';
    color: string;          // 표시 색상
  };
  responseConsistency: {
    indicators: number[];   // [지표1, 지표2, 지표3]
    averageTScore: number;  // 평균 T점수
    isWarning: boolean;
    status: '양호' | '주의';
    color: string;
  };
  consecutiveSameResponse: {
    maxConsecutive: number; // 최대 연속 동일 응답 수
    isWarning: boolean;
    result: '예' | '아니오';
    color: string;
  };
  overallReliability: {
    isReliable: boolean;    // 전체 신뢰성 (하나라도 주의면 false)
    warningCount: number;   // 주의 개수
    excludeFromClassAverage: boolean;  // 반 평균 제외 여부
  };
}
```

### 5.2 신뢰도 판정 함수

```typescript
function assessReliability(
  responses: number[],
  schoolLevel: 'elementary' | 'middle' | 'high'
): ReliabilityIndicators {
  // 1. 사회적 바람직성 계산
  const sdItems = [responses[81], responses[113], responses[19]]; // 문항 82, 114, 20
  const sdMean = sdItems.reduce((a, b) => a + b, 0) / sdItems.length;
  const sdTScore = calculateTScore(sdMean, getNormData('socialDesirability', schoolLevel));
  
  // 2. 반응 일관성 계산
  const rc1 = Math.abs(responses[47] - responses[55]);  // 48번 vs 56번
  const rc2 = Math.abs(responses[63] - responses[71]);  // 64번 vs 72번
  const rc3 = Math.abs(responses[103] - responses[109]); // 104번 vs 110번
  
  // 3. 연속동일반응 확인
  const consecutive = checkConsecutiveSameResponse(responses);
  
  // 4. 종합 판정
  const isReliable = sdTScore < 65 && 
                     // 반응일관성 조건 &&
                     !consecutive.isWarning;
  
  return {
    // ... 결과 객체 구성
  };
}
```

---

## 6. 신뢰도 지표 표시 (결과지)

### 6.1 학생용 결과지 표시

```
┌─────────────────────────────────────────────────────────────┐
│ 신뢰도 지표                                                  │
├─────────────────────────────────────────────────────────────┤
│ 구분              │ 결과  │ 정의                             │
├───────────────────┼───────┼─────────────────────────────────│
│ 사회적 바람직성    │ 양호  │ 타인에게 의도적으로 잘 보이려고  │
│                   │       │ 하는 정도를 의미합니다.          │
├───────────────────┼───────┼─────────────────────────────────│
│ 반응 일관성       │ 양호  │ 유사한 문항에 동일하게 응답하는  │
│                   │       │ 정도를 의미합니다.               │
├───────────────────┼───────┼─────────────────────────────────│
│ 연속동일반응      │ 아니오│ 문항의 제시된 순서를 기준으로    │
│                   │       │ 연속해서 동일한 반응을 한 경우   │
└─────────────────────────────────────────────────────────────┘
```

### 6.2 주의 발생 시 안내 문구

> **검사의 신뢰성을 다시 확인하는 것이 좋습니다.**
> 
> 결과가 '주의'로 나온 경우, 검사에 솔직하고 성실하게 응답하지 않았을 가능성이 있습니다. 
> 검사 결과 해석 시 이 점을 참고하시기 바랍니다.

---

## 7. 구현 체크리스트

```
□ 사회적 바람직성 문항 식별 (82, 114, 20번)
□ 반응 일관성 문항 쌍 식별 (48-56, 64-72, 104-110)
□ 학교급별 기준 데이터 적용
□ T점수 계산 로직 구현
□ 연속동일반응 탐지 로직 구현
□ 주의 판정 로직 구현
□ 반 평균 제외 처리 로직 구현
□ 결과지 표시 색상 적용
```
